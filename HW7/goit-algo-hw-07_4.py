"""
Завдання 4:

Реалізуйте структуру даних для системи коментарів так, щоб коментарі могли мати відповіді, які, в свою чергу, також
могли мати відповіді, формуючи таким чином ієрархічну структуру.

Також візьміть до уваги наступні вимоги:

Реалізуйте клас Comment, що представляє собою окремий коментар. Він має зберігати текст коментаря, автора та список
відповідей.

Метод класу add_reply має додавати нову відповідь до коментаря.

Метод класу remove_reply має видаляти відповідь із коментаря. Це має змінювати текст коментаря на стандартне
повідомлення (наприклад, "Цей коментар було видалено.") і встановлювати прапорець is_deleted в True.

Метод display має рекурсивно виводити коментар та всі його відповіді, використовуючи відступи для відображення
ієрархічної структури.
"""


class Comment:
    def __init__(self, text, author):
        self.text = text
        self.author = author
        self.replies = []  # Список відповідей
        self.is_deleted = False  # Прапорець видаленого коментаря

    def add_reply(self, reply):
        """
        Додає відповідь до коментаря.
        :param reply: Об'єкт класу Comment
        """
        self.replies.append(reply)

    def remove_reply(self):
        """
        Видаляє коментар, змінюючи текст на повідомлення про видалення
        та встановлюючи прапорець is_deleted у True.
        """
        self.text = "Цей коментар було видалено."
        self.is_deleted = True

    def display(self, indent=0):
        """
        Рекурсивно виводить коментар та його відповіді.
        :param indent: Рівень відступу для відображення ієрархії
        """
        prefix = " " * indent
        status = f" (Видалено)" if self.is_deleted else ""
        print(f"{prefix}- {self.author}: {self.text}{status}")
        for reply in self.replies:
            reply.display(indent + 4)


# Приклад використання
if __name__ == "__main__":
    # Створюємо основний коментар
    root_comment = Comment("Яка чудова книга!", "Богдан")

    # Додаємо відповіді
    reply1 = Comment("Книга повне розчарування :(", "Андрій")
    reply2 = Comment("Що в ній чудового?", "Марина")
    root_comment.add_reply(reply1)
    root_comment.add_reply(reply2)

    # Відповідь на коментар Андрія
    reply1_1 = Comment("Не книжка, а перевели купу паперу ні нащо...", "Сергій")
    reply1.add_reply(reply1_1)
    reply2_1 = Comment("Мені сподобалася за сюжетом", "Богдан")
    reply2.add_reply(reply2_1)

    # Видаляємо коментар Андрія
    reply2_1.remove_reply()

    # Виводимо ієрархію коментарів
    root_comment.display()
